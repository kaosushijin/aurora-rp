
--- Debug session started: 2025-09-14T18:29:18.027863 ---
[18:29:18.027] SYSTEM: DevName RPG Client starting - remodularized version
[18:29:18.027] SYSTEM: Arguments: {'debug': True, 'config': 'config.json'}
[18:29:18.027] SYSTEM: Using hub-and-spoke architecture with orchestrator
[18:29:18.027] SYSTEM: Running from root directory: /home/jinx/git/aurora-rp
[18:29:18.028] SYSTEM: Configuration loaded with hardcoded values
[18:29:18.028] SYSTEM: DevName RPG Client starting with orchestrator
[18:29:19.028] SYSTEM: Starting orchestrator run sequence
[18:29:19.028] ORCHESTRATOR: Orchestrator created
[18:29:19.028] ORCHESTRATOR: Starting orchestrator run sequence
[18:29:19.028] ORCHESTRATOR: Starting module initialization
[18:29:19.028] MAIN: No existing memory file found at memory.json
[18:29:19.028] ORCHESTRATOR: Memory manager initialized
[18:29:19.028] ORCHESTRATOR: Semantic engine initialized
[18:29:19.028] ORCHESTRATOR: Momentum engine initialized
[18:29:19.028] ORCHESTRATOR: Added critrules to system prompt
[18:29:19.028] ORCHESTRATOR: Added companion to system prompt
[18:29:19.028] ORCHESTRATOR: Added lowrules to system prompt
[18:29:19.028] ORCHESTRATOR: System prompt configured: 9813 chars from 3 sections
[18:29:19.028] ORCHESTRATOR: MCP client configured:
[18:29:19.028] ORCHESTRATOR:   server_url: http://localhost:3456/chat
[18:29:19.028] ORCHESTRATOR:   model: qwen3:8b-q4_K_M
[18:29:19.028] ORCHESTRATOR:   timeout: 300
[18:29:19.028] ORCHESTRATOR: MCP client initialized
[18:29:19.028] MAIN: NCUI: UI controller created
[18:29:19.028] ORCHESTRATOR: UI controller initialized
[18:29:19.028] ORCHESTRATOR: Module callbacks configured
[18:29:19.029] ORCHESTRATOR: Background analysis thread started
[18:29:19.028] ORCHESTRATOR: Analysis worker thread started
[18:29:19.029] ORCHESTRATOR: All modules initialized successfully
[18:29:19.029] ORCHESTRATOR: Transferring control to UI controller
[18:29:19.029] MAIN: NCUI: Terminal size detected: 236x61
[18:29:19.029] MAIN: NCUI: Color support initialized with classic theme
[18:29:19.029] MAIN: NCUI: Terminal manager created
[18:29:19.029] MAIN: NCUI: Layout calculated successfully
[18:29:19.029] MAIN: NCUI: MultiLineInput width set to: 224
[18:29:19.029] MAIN: NCUI: MultiLineInput viewport height set to: 4
[18:29:19.029] MAIN: NCUI: Windows created successfully
[18:29:19.029] ORCHESTRATOR: Processing UI callback: add_system_message
[18:29:19.029] MAIN: Added system message: 46 chars, 11 tokens
[18:29:19.030] MAIN: Conversation saved to memory.json
[18:29:19.030] MAIN: Atomic save failed, using direct write: [Errno 2] No such file or directory: 'memory.json.tmp'
[18:29:19.030] ORCHESTRATOR: Added system message: Starting new session. Type /help for commands....
[18:29:19.030] MAIN: NCUI: Welcome content populated
[18:29:19.030] MAIN: Conversation saved to memory.json
[18:29:19.031] MAIN: NCUI: UI initialization complete
[18:29:19.031] MAIN: NCUI: Starting UI main loop
[18:29:28.657] MAIN: NCUI: Submitting user input
[18:29:28.657] ORCHESTRATOR: Processing UI callback: user_input
[18:29:28.657] ORCHESTRATOR: Processing user input
[18:29:28.657] MAIN: Added user message: 54 chars, 13 tokens
[18:29:28.658] MAIN: Conversation saved to memory.json
[18:29:28.658] MAIN: Atomic save failed, using direct write: [Errno 2] No such file or directory: 'memory.json.tmp'
[18:29:28.658] ORCHESTRATOR: User message saved and committed to memory
[18:29:28.658] ORCHESTRATOR: User message stored in memory - ready for immediate echo
[18:29:28.658] MAIN: Conversation saved to memory.json
[18:29:28.658] ORCHESTRATOR: Background LLM processing started
[18:29:28.659] ORCHESTRATOR: Making LLM request
[18:29:28.659] MCP: Request: 54 chars, 5 messages
[18:29:34.676] MCP: Response received: 6.02s
[18:29:34.677] MCP: Removed think blocks from response
[18:29:34.677] ORCHESTRATOR: LLM request completed successfully (string response)
[18:29:34.677] MAIN: Added assistant message: 878 chars, 219 tokens
[18:29:34.678] MAIN: NCUI: Processing state cleared - UI ready for input
[18:29:34.678] MAIN: Conversation saved to memory.json
[18:29:34.678] ORCHESTRATOR: LLM response stored in memory
[18:29:34.679] MAIN: SME: Processed input: pressure=0.000, duration=30.0s
[18:29:34.678] MAIN: Atomic save failed, using direct write: [Errno 2] No such file or directory: 'memory.json.tmp'
[18:29:34.679] ORCHESTRATOR: Background LLM processing completed
[18:29:34.679] MAIN: Conversation saved to memory.json
[18:30:09.353] MAIN: NCUI: Submitting user input
[18:30:09.353] ORCHESTRATOR: Processing UI callback: user_input
[18:30:09.353] ORCHESTRATOR: Processing user input
[18:30:09.354] MAIN: Added user message: 115 chars, 28 tokens
[18:30:09.354] MAIN: Conversation saved to memory.json
[18:30:09.354] MAIN: Atomic save failed, using direct write: [Errno 2] No such file or directory: 'memory.json.tmp'
[18:30:09.354] MAIN: Conversation saved to memory.json
[18:30:09.354] ORCHESTRATOR: User message saved and committed to memory
[18:30:09.354] ORCHESTRATOR: User message stored in memory - ready for immediate echo
[18:30:09.355] ORCHESTRATOR: Background LLM processing started
[18:30:09.355] ORCHESTRATOR: Making LLM request
[18:30:09.356] MCP: Request: 115 chars, 7 messages
[18:30:20.406] MCP: Response received: 11.05s
[18:30:20.407] MCP: Removed think blocks from response
[18:30:20.407] ORCHESTRATOR: LLM request completed successfully (string response)
[18:30:20.407] MAIN: Added assistant message: 2626 chars, 656 tokens
[18:30:20.407] MAIN: Conversation saved to memory.json
[18:30:20.407] MAIN: Atomic save failed, using direct write: [Errno 2] No such file or directory: 'memory.json.tmp'
[18:30:20.407] ORCHESTRATOR: LLM response stored in memory
[18:30:20.408] MAIN: SME: Processed input: pressure=0.000, duration=30.0s
[18:30:20.408] ORCHESTRATOR: Background LLM processing completed
[18:30:20.408] MAIN: Conversation saved to memory.json
[18:30:20.505] MAIN: NCUI: Processing state cleared - UI ready for input
[18:30:26.686] ORCHESTRATOR: Processing UI callback: add_system_message
[18:30:26.686] MAIN: Added system message: 20 chars, 5 tokens
[18:30:26.687] MAIN: Conversation saved to memory.json
[18:30:26.687] MAIN: Atomic save failed, using direct write: [Errno 2] No such file or directory: 'memory.json.tmp'
[18:30:26.688] MAIN: Conversation saved to memory.json
[18:30:26.688] ORCHESTRATOR: Added system message: Starting analysis......
[18:30:26.689] ORCHESTRATOR: Processing UI callback: force_analysis
[18:30:26.690] ORCHESTRATOR: Starting immediate analysis
[18:30:26.690] ORCHESTRATOR: Processing UI callback: add_system_message
[18:30:26.690] ORCHESTRATOR: Starting periodic analysis
[18:30:26.690] MAIN: Added system message: 18 chars, 4 tokens
[18:30:26.690] MAIN: SEM: Starting semantic analysis of 7 messages
[18:30:26.690] MCP: Request: 55 chars, 3 messages
[18:30:26.691] MAIN: Conversation saved to memory.json
[18:30:26.691] MAIN: Atomic save failed, using direct write: [Errno 2] No such file or directory: 'memory.json.tmp'
[18:30:26.691] MAIN: Conversation saved to memory.json
[18:30:26.691] ORCHESTRATOR: Added system message: Analysis completed...
[18:30:27.042] MCP: Response received: 0.35s
[18:30:27.043] MCP: Removed think blocks from response
[18:30:27.043] MAIN: SEM: LLM analysis successful for msg_0
[18:30:27.043] MAIN: SEM: Raw LLM response for msg_0: Starting new session. Type /help for commands....
[18:30:27.043] MAIN: SEM: Attempting JSON parsing on: Starting new session. Type /help for commands....
[18:30:27.043] MAIN: SEM: Parsing failed for msg_0: could not extract semantic data
[18:30:27.043] MAIN: SEM: Using pattern-based analysis for message msg_0
[18:30:27.043] MCP: Request: 63 chars, 3 messages
[18:30:28.364] MCP: Response received: 1.32s
[18:30:28.364] MCP: Removed think blocks from response
[18:30:28.364] MAIN: SEM: LLM analysis successful for msg_1
[18:30:28.364] MAIN: SEM: Raw LLM response for msg_1: Hello, Koryn. Your half-elf heritage grants you the ability to blend into both human and elf societies, though you often find yourself caught between the two. Your keen senses and agility make you a f...
[18:30:28.364] MAIN: SEM: Attempting JSON parsing on: Hello, Koryn. Your half-elf heritage grants you the ability to blend into both human and elf societi...
[18:30:28.365] MAIN: SEM: Parsing failed for msg_1: could not extract semantic data
[18:30:28.365] MAIN: SEM: Using pattern-based analysis for message msg_1
[18:30:28.365] MCP: Request: 887 chars, 3 messages
[18:30:31.556] MCP: Response received: 3.19s
[18:30:31.556] MCP: Removed think blocks from response
[18:30:31.556] MAIN: SEM: LLM analysis successful for msg_2
[18:30:31.556] MAIN: SEM: Raw LLM response for msg_2: I examine the wind.  

The crisp morning air carries the scent of pine and damp earth, but beneath it lies a more troubling note—charred wood and a metallic tang that clings to the breath. The cobbled...
[18:30:31.556] MAIN: SEM: Attempting JSON parsing on: I examine the wind.  

The crisp morning air carries the scent of pine and damp earth, but beneath i...
[18:30:31.556] MAIN: SEM: Parsing failed for msg_2: could not extract semantic data
[18:30:31.556] MAIN: SEM: Using pattern-based analysis for message msg_2
[18:30:31.556] MCP: Request: 124 chars, 3 messages
[18:30:36.606] MCP: Response received: 5.05s
[18:30:36.606] MCP: Removed think blocks from response
[18:30:36.606] MAIN: SEM: LLM analysis successful for msg_3
[18:30:36.606] MAIN: SEM: Raw LLM response for msg_3: You head toward the tavern, the familiar scent of spiced ale and charred wood mingling in the air. The building looms ahead, its stone walls weathered by time and the passage of countless travelers. A...
[18:30:36.606] MAIN: SEM: Attempting JSON parsing on: You head toward the tavern, the familiar scent of spiced ale and charred wood mingling in the air. T...
[18:30:36.606] MAIN: SEM: Parsing failed for msg_3: could not extract semantic data
[18:30:36.606] MAIN: SEM: Using pattern-based analysis for message msg_3
[18:30:36.606] MCP: Request: 2635 chars, 3 messages
[18:30:41.305] MCP: Response received: 4.70s
[18:30:41.305] MCP: Removed think blocks from response
[18:30:41.305] MAIN: SEM: LLM analysis successful for msg_4
[18:30:41.305] MAIN: SEM: Raw LLM response for msg_4: You take a seat beside them, and Kael slaps a hand on the table, knocking over a glass of ale. "Right, right. You came all this way to find out about the flame, didn’t you?" He turns to the barkeep, w...
[18:30:41.305] MAIN: SEM: Attempting JSON parsing on: You take a seat beside them, and Kael slaps a hand on the table, knocking over a glass of ale. "Righ...
[18:30:41.305] MAIN: SEM: Parsing failed for msg_4: could not extract semantic data
[18:30:41.305] MAIN: SEM: Using pattern-based analysis for message msg_4
[18:30:41.306] MCP: Request: 29 chars, 3 messages
[18:30:41.522] MCP: Response received: 0.22s
[18:30:41.522] MCP: Removed think blocks from response
[18:30:41.522] MAIN: SEM: LLM analysis successful for msg_5
[18:30:41.522] MAIN: SEM: Raw LLM response for msg_5: Starting analysis......
[18:30:41.522] MAIN: SEM: Attempting JSON parsing on: Starting analysis......
[18:30:41.522] MAIN: SEM: Parsing failed for msg_5: could not extract semantic data
[18:30:41.522] MAIN: SEM: Using pattern-based analysis for message msg_5
[18:30:41.522] MCP: Request: 27 chars, 3 messages
[18:30:46.031] MCP: Response received: 4.51s
[18:30:46.032] MCP: Removed think blocks from response
[18:30:46.032] MAIN: SEM: LLM analysis successful for msg_6
[18:30:46.032] MAIN: SEM: Raw LLM response for msg_6: **ACKNOWLEDGEMENT**: You state, "Analysis completed."

**WORLD REACTION**: The air in the chamber grows heavy, as if the very walls are holding their breath. A faint hum begins to resonate from the st...
[18:30:46.032] MAIN: SEM: Attempting JSON parsing on: **ACKNOWLEDGEMENT**: You state, "Analysis completed."

**WORLD REACTION**: The air in the chamber gr...
[18:30:46.032] MAIN: SEM: Parsing failed for msg_6: could not extract semantic data
[18:30:46.032] MAIN: SEM: Using pattern-based analysis for message msg_6
[18:30:46.032] MAIN: SEM: Semantic analysis completed: 7 messages analyzed
[18:30:46.032] ORCHESTRATOR: Semantic analysis completed
[18:30:46.032] MAIN: SME: Starting momentum analysis
[18:30:46.032] MAIN: SME: Received list context with 7 messages
[18:30:46.033] MAIN: SME: Applied pressure change: +0.300 -> 0.300 (floor: 0.300)
[18:30:46.033] MAIN: SME: Story arc updated to RISING (medium pressure)
[18:30:46.033] MAIN: SME: Momentum analysis completed: pressure=0.300, patterns=6
[18:30:46.033] ORCHESTRATOR: Momentum analysis completed
[18:30:46.033] ORCHESTRATOR: Periodic analysis completed successfully
[18:30:56.174] MAIN: NCUI: Quit command received
[18:30:56.174] ORCHESTRATOR: Processing UI callback: shutdown
[18:30:56.174] ORCHESTRATOR: Shutdown requested
[18:30:56.174] MAIN: NCUI: Starting UI cleanup
[18:30:56.174] MAIN: NCUI: UI cleanup complete
[18:30:56.174] ORCHESTRATOR: Starting module shutdown
[18:30:56.175] ORCHESTRATOR: Analysis worker thread stopped
[18:30:56.175] ORCHESTRATOR: Analysis thread stopped
[18:30:56.175] MCP: MCP client shutdown complete
[18:30:56.175] ORCHESTRATOR: MCP client shutdown
[18:30:56.175] ORCHESTRATOR: All modules shutdown completed
[18:30:56.175] ORCHESTRATOR: Orchestrator run completed with exit code: 0
[18:30:56.175] SYSTEM: Orchestrator run completed with exit code: 0
